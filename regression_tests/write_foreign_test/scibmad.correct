# File generated by: write_lattice_in_foreign_format
# Bmad lattice file: /nfs/acc/user/dcs16/bmad-ecosystem/regression_tests/write_foreign_test/write_foreign_test.bmad

using Beamlines

 
function map_match1(v, q)
  v_out1= 
  v_out2= 
  v_out3= 
  v_out4= 
  v_out5= 
  v_out6= 

  q_out0 = 0.0
  q_out1 = 0.0
  q_out2 = 0.0
  q_out3 = 0.0

  return (v_out1, v_out2, v_out3, v_out4, v_out5, v_out6), (q_out1, q_out2, q_out3, q_out4)
end
 
function map_taylor1(v, q)
  v_out1= 
      1.0044545389465001E+00*v[1] +
     -9.5488482731920007E-03 +
      8.8121098650986998E+00*v[2] +
      3.1588658629825002E-06*v[3] +
      6.2473608609792999E-07*v[4] +
     -7.9443016535773005E-04*v[5] +
     -1.5989734203101999E-03*v[6] +
     -1.8688671328748999E-01*v[1]^2 +
     -4.4998640546184999E-08*v[1]*v[4] +
      2.2651451374403998E-06*v[2]*v[4] +
      7.3788700448494005E-02*v[3]*v[4] +
      7.4849562738380001E-03*v[4]^2 +
      8.2601396763208005E-04*v[5]^2 +
     -2.8821993367623001E-03*v[1]*v[6] +
     -5.8123275619217001E+00*v[2]*v[6] +
     -2.2658860798389999E-06*v[3]*v[6] +
     -1.0735265475718999E-06*v[4]*v[6] +
     -2.5977503757165999E-05*v[5]*v[6] +
      1.5991459348089999E-03*v[6]^2                                                                                                                                                                     
  v_out2= 
      1.0001015415885000E+00*v[2] +
      2.7502236028299998E-04 +
      5.1707642703827995E-04*v[1] +
      3.6671688283007001E-07*v[3] +
      7.2562277969591002E-08*v[4] +
     -8.2466736904441998E-04*v[2]^2 +
      2.1696204516247000E-02*v[3]^2 +
     -1.6688665581997000E-08*v[1]*v[4] +
     -1.0055078736400000E-07*v[2]*v[4] +
      8.5656912718635007E-03*v[3]*v[4] +
      8.7607181539391999E-04*v[4]^2 +
      1.5386804916133000E-06*v[1]*v[5] +
      2.9708711792290998E-03*v[2]*v[5] +
     -7.7463649579207001E-08*v[4]*v[6] +
     -8.1698276776954005E-07*v[5]*v[6] +
      2.8869908085531002E-08*v[6]^2                                                                                                                                                                     
  v_out3= 
      1.0000000000000000E+00*v[3] +
      3.2610587848948997E-05 +
     -8.4878689763542002E-06*v[5] +
     -1.6296474350809000E-05*v[6] +
      5.2306276920315003E-08*v[1]*v[2] +
      9.9263012775822996E-07*v[2]^2 +
      3.7377502367754001E-01*v[1]*v[3] +
      7.3779185147525003E-02*v[2]*v[3] +
      7.3717614772643006E-02*v[1]*v[4] +
      1.4551648697650001E-02*v[2]*v[4] +
     -1.4099480251362000E-03*v[3]*v[5] +
     -3.0176045012420998E+00*v[4]*v[5] +
      8.4155398883643004E-06*v[5]^2 +
     -2.2654615239860002E-06*v[1]*v[6] +
     -1.0704091926158000E-06*v[2]*v[6] +
      2.8826770573566998E-03*v[3]*v[6] +
     -5.8094307630203001E+00*v[4]*v[6] +
      1.1948119498249000E-07*v[5]*v[6]                                                                                                                                                                  
  v_out4= 
      9.9989735493445997E-01*v[4] +
     -5.1721102259608001E-04*v[3] +
      8.3316347911184997E-09*v[5] +
     -7.3754939754283003E-08*v[2]^2 +
     -1.6488657985452000E-08*v[3]*v[4] +
     -1.7426362705245000E-07*v[4]^2 +
     -1.5335666645362000E-06*v[3]*v[5] +
      2.9702617467799999E-03*v[4]*v[5] +
     -2.4061772320287001E-08*v[1]*v[6] +
     -7.7038857344360996E-08*v[2]*v[6] +
     -2.3149938691031999E-06*v[3]*v[6] +
      1.0238081722251001E-04*v[4]*v[6]                                                                                                                                                                  
  v_out5= 
      1.0000000000000000E+00*v[5] +
     -8.6213990823047005E-05 +
     -7.9767882767975999E-07*v[1] +
     -1.5988799230181999E-03*v[2] +
      7.5743225597097007E-09*v[3] +
     -3.4279364209868998E-05*v[3]^2 +
     -2.1930300969081001E-06*v[1]*v[4] +
     -8.1288561193210998E-07*v[2]*v[4] +
      2.8890834757965000E-03*v[3]*v[4] +
     -2.9048688615274001E+00*v[4]^2 +
      8.0459784624257998E-07*v[1]*v[5] +
     -2.3619439665920999E-05*v[2]*v[5] +
      1.4526115573872001E-07*v[4]*v[5] +
      1.4504319745257000E-08*v[5]*v[6] +
     -7.4136661038075996E-07*v[6]^2                                                                                                                                                                     
  v_out6= 
      1.0000000000000000E+00*v[6] +
     -7.5702326313153998E-06 +
      1.2266225971909000E-06*v[1] +
      7.9221093326577001E-04*v[2] +
      4.2434113169099002E-09*v[3] +
      8.4636393264336007E-06*v[4] +
      5.9409439272306002E-03*v[5] +
      3.6954232986860999E-07*v[1]*v[3] +
      1.1765753082018999E-06*v[2]*v[3] +
      1.6057156163853000E-05*v[3]^2 +
      1.1766022575118001E-06*v[1]*v[4] +
      4.7829141229330000E-07*v[2]*v[4] +
      1.4203210587175000E-03*v[3]*v[4] +
      1.5044749550020000E+00*v[4]^2 +
     -5.3002411118528995E-07*v[1]*v[5] +
      3.2952059293287001E-05*v[2]*v[6] +
     -4.6831132007122998E-08*v[4]*v[6]                                                                                                                                                                  

  q_out0 = 
      5.9999999999999998E-01                                                                                                                                                                            
  q_out1 = 
      6.9999999999999996E-01                                                                                                                                                                            
  q_out2 = 
      8.0000000000000004E-01                                                                                                                                                                            
  q_out3 = 
      2.3000000000000001E-01*q[1]*q[3]^2                                                                                                                                                                

  return (v_out1, v_out2, v_out3, v_out4, v_out5, v_out6), (q_out1, q_out2, q_out3, q_out4)
end

@eles begin
  ab_multipole1 = Multipole(Ks2L =   2.00000E+02, Kn2L =   2.00000E+02, z_rot =   1.00000E-01)
  ac_kicker0123456789 = ACKicker(L =   3.00000E-01, Kn0 =  -3.33333E-02)
  ac_kicker2 = ACKicker(L =   4.00000E-01, Ks0 =   2.50000E-02)
  beambeam1 = BeamBeam(x_offset =   3.00000E-03, y_offset =   3.00000E-03, x_rot =   5.00000E-02,
   ksol =   1.00000E+00)
  crab_cavity1 = CrabCavity(L =   2.00000E-01, rf_frequency =   1.00000E+08, voltage =   1.00000E+03,
   phi0 =  -2.00000E-01)
  ecollimator1 = Drift(L =   4.50000E+00, Ks0 =   2.20372E-04, Kn0 =  -2.25549E-03,
   x1_limit =  -2.00000E-01, x2_limit =   2.00000E-01, y1_limit =  -1.00000E-01, y2_limit =   1.00000E-01,
   x_offset =   2.00000E-02, x_rot =   1.00000E-03, z_rot =   1.00000E-01)
  elseparator1 = ELSeparator(L =   4.50000E+00, En0 =  -9.55090E+02, x_offset =   5.00000E-02,
   x_rot =   1.00000E-03, z_rot =   1.00000E-01)
  elseparator2 = ELSeparator(L =   4.50000E+00, Es0 =   9.55090E+02, x_offset =   5.00000E-02,
   x_rot =   1.00000E-03, z_rot =   1.00000E-01)
  em_field1 = EMField(L =   1.40000E+00)
  em_field2 = EMField(L =   1.40000E+00)
  fiducial1 = Fiducial()
  floor_shift1 = FloorShift(x_offset =   1.00000E-01, y_offset =   2.00000E-01, z_offset =   3.00000E-01,
   x_rot =   2.00000E-02, y_rot =  -1.00000E-02, z_rot =   4.00000E-01)
  gkicker1 = Kicker()
  hkicker1 = Kicker(L =   4.50000E+00, Kn0 =  -1.11111E-03, x_offset =   5.00000E-02,
   x_rot =   1.00000E-03, z_rot =   1.00000E-01)
  instrument1 = Drift(L =   4.50000E+00)
  kicker1 = Kicker(L =   4.50000E+00, Ks0 =   6.66667E-04, Kn0 =   1.33333E-06, x_offset =   5.00000E-02,
   x_rot =   1.00000E-03, z_rot =   1.00000E-01)
  match1 = LineElement(transport_map = map_match1)
  monitor1 = Drift(L =   4.50000E+00)
  multipole1 = Multipole(Ks1L =  -1.00000E+00, Kn1L =   6.12323E-17, Ks3L =   3.08046E+00,
   Kn3L =  -3.28036E+00)
  octupole1 = Octupole(L =   4.50000E+00, Kn3 =   1.00000E+03, x_offset =   1.00000E-02,
   x_rot =   1.00000E-03, z_rot =   3.92699E-01)
  patch1 = Patch(L =   4.00499E-03, dt =   1.00000E-11, dx =   1.00000E-03, dy =   2.00000E-03,
   dz =   4.00000E-03, dx_rot =   2.00000E-03, dy_rot =  -1.00000E-03, dz_rot =   2.00000E+00)
  quadrupole1 = Quadrupole(L =   6.00000E-01, Ks0 =   9.88215E-03, Kn0 =   1.17851E-04,
   Ks1 =   1.00000E-01, Kn1 =   1.00000E+00, En0 =  -2.00000E+03, Es1 =   2.00000E+04,
   x_offset =   5.00000E-02, x_rot =   1.00000E-03, z_rot =   7.85398E-01)
  quadrupole2 = Quadrupole(L =   6.00000E-01, Ks0 =  -1.01179E-02, Kn0 =   1.17851E-04,
   Ks1 =  -1.00000E-01, Kn1 =  -1.00000E+00, En0 =  -2.00000E+03, Es1 =   2.00000E+04,
   x_offset =   5.00000E-02, x_rot =   1.00000E-03, z_rot =   7.85398E-01)
  quadrupole3 = Quadrupole(L =   6.00000E-01, Ks0 =  -1.17851E-04, Kn0 =   1.17851E-04,
   Ks1 =   1.00000E-21, Kn1 =   1.00000E-20, En0 =  -2.00000E+03, Es1 =   2.00000E+04,
   x_offset =   5.00000E-02, x_rot =   1.00000E-03, z_rot =   7.85398E-01)
  quadrupole4 = Quadrupole(L =   6.00000E-01, Ks0 =   9.88215E-03, Kn0 =   1.17851E-04,
   Ks1 =   1.00000E-01, Kn1 =   1.00000E+00, En0 =  -2.00000E+03, Es1 =   2.00000E+04,
   x_offset =   5.00000E-02, x_rot =   1.00000E-03, z_rot =   7.85398E-01)
  quadrupole5 = Quadrupole(L =   6.00000E-01, Ks0 =  -1.01179E-02, Kn0 =   1.17851E-04,
   Ks1 =  -1.00000E-01, Kn1 =  -1.00000E+00, En0 =  -2.00000E+03, Es1 =   2.00000E+04,
   x_offset =   5.00000E-02, x_rot =   1.00000E-03, z_rot =   7.85398E-01)
  rcollimator1 = Drift(L =   4.50000E+00, x1_limit =  -2.00000E-01, x2_limit =   2.00000E-01,
   y1_limit =  -1.00000E-01, y2_limit =   1.00000E-01, x_offset =   2.00000E-02, x_rot =   1.00000E-03,
   z_rot =   1.00000E-01)
  rfcavity1 = RFCavity(L =   4.50000E+00, x_offset =   5.00000E-02, x_rot =   1.00000E-03,
   z_rot =   1.00000E-01, zero_phase = PhaseReference.AboveTransition, rf_frequency =   5.00000E+08,
   voltage =   1.00000E+05, phi0 =   1.00000E-01)
  rfcavity2 = RFCavity(L =   4.50000E+00, x_offset =   5.00000E-02, x_rot =   1.00000E-03,
   z_rot =   1.00000E-01, zero_phase = PhaseReference.AboveTransition, rf_frequency =   5.00000E+08,
   voltage =   1.00000E+05, phi0 =   1.00000E-01)
  rfcavity3 = RFCavity(x_offset =   5.00000E-02, x_rot =   1.00000E-03, z_rot =   1.00000E-01,
   zero_phase = PhaseReference.AboveTransition, rf_frequency =   5.00000E+08, voltage =   1.00000E+05,
   phi0 =   1.00000E-01)
  sad_mult1 = SadMult(L =   1.00000E-01, Ks1 =   2.00000E-01, Kn2 =   8.00000E+02, Ks10 =   3.62880E+27,
   ksol =   5.00000E-01)
  sad_mult2 = SadMult(Ks1L =   2.00000E-02, Kn2L =   8.00000E+01, Ks10L =   3.62880E+26,
   ksol =   5.00000E-01)
  sbend1 = SBend(L =   6.00000E-01, tilt_ref =   1.00000E-01, Ks0 =  -1.65834E-04, Kn0 =   1.66389E-05,
   Kn1 =   3.00000E-01, En0 =  -2.00000E+03, Es1 =   6.66667E+03, x_offset =   5.00000E-02,
   x_rot =   1.00000E-03)
  rbend2 = SBend(bend_type = rbend, L_chord =   6.00000E-01, tilt_ref =   1.00000E-01,
   Ks0 =  -1.65834E-04, Kn0 =   1.66389E-05, Kn2 =   3.00000E+00, En0 =  -2.00000E+03, Es1 =   6.66667E+03,
   x_offset =   5.00000E-02, x_rot =   1.00000E-03)
  sbend3 = SBend(L =   6.00000E-01, tilt_ref =   1.00000E-01, Ks0 =  -1.65834E-04, Kn0 =   1.66389E-05,
   Kn1 =   3.00000E-01, Kn2 =   3.00000E+00, En0 =  -2.00000E+03, Es1 =   6.66667E+03,
   x_offset =   5.00000E-02, x_rot =   1.00000E-03)
  rbend4 = SBend(bend_type = rbend, L_chord =   6.00000E-01, e1_rect =   1.00000E-01,
   e2_rect =   2.00000E-01, g_ref =   1.00000E-02, tilt_ref =   1.00000E-01, Ks0 =  -1.64834E-04,
   Kn0 =   6.78328E-03, Ks1 =   5.00000E-06, En0 =  -2.00000E+03, Es1 =   6.66667E+03,
   x_offset =   5.00000E-02, x_rot =   1.00000E-03)
  sbend5 = SBend(L =   6.00000E-01, e1 =   1.00000E-01, e2 =   2.00000E-01, g_ref =   1.00000E-02,
   tilt_ref =   1.00000E-01, Ks0 =  -6.58340E-05, Kn0 =   1.66833E-02, Ks1 =   5.00000E-04,
   En0 =  -2.00000E+03, Es1 =   6.66667E+03, x_offset =   5.00000E-02, x_rot =   1.00000E-03)
  rbend6 = SBend(bend_type = rbend, L_chord =   6.00000E-01, e1_rect =   1.00000E-01,
   e2_rect =   2.00000E-01, g_ref =   1.00000E-02, tilt_ref =   1.00000E-01, Ks0 =  -1.65833E-04,
   Kn0 =   6.68338E-03, Ks1 =   5.00000E-09, En0 =  -2.00000E+03, Es1 =   6.66667E+03,
   x_offset =   5.00000E-02, x_rot =   1.00000E-03)
  sbend7 = SBend(L =   6.00000E-01, e1 =   1.00000E-01, e2 =   2.00000E-01, g_ref =   1.00000E-02,
   tilt_ref =   1.00000E-01, Ks0 =  -6.58340E-05, Kn0 =   1.66833E-02, Ks1 =   5.00000E-04,
   En0 =  -2.00000E+03, Es1 =   6.66667E+03, x_offset =   5.00000E-02, x_rot =   1.00000E-03)
  sextupole1 = Sextupole(L =   6.00000E-01, Kn2 =   1.00000E+00, x_offset =   5.00000E-02,
   x_rot =   1.00000E-03, z_rot =   5.23599E-01)
  solenoid1 = Solenoid(L =   2.60000E+00, x_offset =   5.00000E-02, x_rot =   1.00000E-03,
   z_rot =   1.00000E-01, ksol =   1.00000E+00)
  solenoid2 = Solenoid(L =   2.60000E+00, x_offset =   5.00000E-02, x_rot =   1.00000E-03,
   z_rot =   1.00000E-01, ksol =   1.00000E-12)
  sol_quad1 = Solenoid(L =   2.60000E+00, Kn1 =   1.00000E+00, x_offset =   5.00000E-02,
   x_rot =   1.00000E-03, z_rot =   1.00000E-01, ksol =   1.00000E+00)
  sol_quad2 = Solenoid(L =   2.60000E+00, Kn1 =   1.00000E-05, x_offset =   5.00000E-02,
   x_rot =   1.00000E-03, z_rot =   1.00000E-01, ksol =   1.00000E+00)
  thick_multipole1 = ThickMultipole(L =   4.50000E+00, Ks2 =   4.44444E-01, Kn3 =   2.66667E+01,
   x_offset =   2.00000E-02, z_rot =   1.00000E-01)
  taylor1 = LineElement(L =   5.00000E-01, transport_map = map_taylor1)
  vkicker1 = Kicker(L =   4.50000E+00, Ks0 =   1.11111E-03, x_offset =   5.00000E-02,
   x_rot =   1.00000E-03, z_rot =   1.00000E-01)
  lcavity1 = RFCavity(L =   4.50000E+00, x_offset =   5.00000E-02, x_rot =   1.00000E-03,
   z_rot =   1.00000E-01, rf_frequency =   5.00000E+08, voltage =   5.00000E+03, phi0 =  -1.90000E-01)
  lcavity2 = RFCavity(L =   4.50000E+00, x_offset =   5.00000E-02, x_rot =   1.00000E-03,
   z_rot =   1.00000E-01, rf_frequency =   5.00000E+08, voltage =   5.00000E+00, phi0 =  -1.90000E-01)
  lcavity3 = RFCavity(L =   4.50000E+00, x_offset =   5.00000E-02, x_rot =   1.00000E-03,
   z_rot =   1.00000E-01, rf_frequency =   5.00000E+08, voltage =   5.04500E+03, phi0 =  -1.90000E-01)
  end_b0 = Marker()
end    # @eles

l1 = Beamline([ ab_multipole1, ac_kicker0123456789, ac_kicker0123456789, ac_kicker2, beambeam1,
   crab_cavity1, ecollimator1, elseparator1, elseparator2, em_field1, em_field2, fiducial1, floor_shift1,
   gkicker1, hkicker1, instrument1, kicker1, match1, monitor1, multipole1, octupole1, patch1, quadrupole1,
   quadrupole2, quadrupole3, quadrupole4, quadrupole5, rcollimator1, rfcavity1, rfcavity2, rfcavity3,
   sad_mult1, sad_mult2, sbend1, rbend2, sbend3, rbend4, sbend5, rbend6, sbend7, sextupole1, solenoid1,
   solenoid2, sol_quad1, sol_quad2, thick_multipole1, taylor1, vkicker1, lcavity1, lcavity2, lcavity3,
   end_b0]; pc_ref =   8.59581E+05, species_ref = Species("positron"))
