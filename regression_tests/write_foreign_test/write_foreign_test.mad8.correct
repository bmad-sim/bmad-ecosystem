!  File generated by: write_lattice_in_mad_format
!  Bmad Lattice File: /nfs/acc/user/dcs16/bmad-ecosystem/regression_tests/write_foreign_test/write_foreign_test.bmad

beam_def: Beam, Particle = Positron, Energy = 1E-3, Npart = 1E10

AB_MULTIPOLE1: multipole, K2L = 282.843, T2 = -0.161799
A_KICKER_1: kicker, l = 0, hkick = 5E-3
AC_KICKER1: matrix, rm(1,1) = 1, rm(2,2) = 1, rm(3,3) = 1, rm(4, &
    4) = 1, rm(5,5) = 1, kick(5) = 3.0375E-8, rm(6,6) = 1
A_KICKER_2: kicker, l = 0, vkick = 5E-3
AC_KICKER2: matrix, rm(1,1) = 1, rm(2,2) = 1, rm(3,3) = 1, rm(4, &
    4) = 1, rm(5,5) = 1, kick(5) = 1.9869E-5, rm(6,6) = 1
A_KICKER_3: kicker, l = 0, vkick = 5E-3
AC_KICKER3: matrix, rm(1,1) = 1, rm(2,2) = 1, rm(3,3) = 1, rm(4, &
    4) = 1, rm(5,5) = 1, kick(5) = 7.04361E-7, rm(6,6) = 1
BEAMBEAM1: beambeam, sigx = 3E-3, sigy = 3E-4, xma = 3E-3, yma = 3E-3, &
     charge = -1
CRAB_CAVITY1: drift, l = 0.2
E_KICKER_4: kicker, l = 0, hkick = 5E-3, vkick = 1E-3
ECOLLIMATOR1: matrix, rm(1,1) = 1, rm(2,2) = 1, rm(3,3) = 1, rm(4, &
    4) = 1, rm(5,5) = 1, kick(5) = 1.93052E-5, rm(6,6) = 1
E_KICKER_5: kicker, l = 0, hkick = 2.5E-3
ELSEPARATOR1: matrix, rm(1,1) = 1, rm(2,2) = 1, rm(3,3) = 1, rm(4, &
    4) = 1, rm(5,5) = 1, kick(5) = 1.40626E-5, rm(6,6) = 1
E_KICKER_6: kicker, l = 0, vkick = 2.5E-3
ELSEPARATOR2: matrix, rm(1,1) = 1, rm(2,2) = 1, rm(3,3) = 1, rm(4, &
    4) = 1, rm(5,5) = 1, kick(5) = 1.40626E-5, rm(6,6) = 1
EM_FIELD1: drift, l = 1.4
EM_FIELD2: drift, l = 1.4
FIDUCIAL1: drift, l = 0
FLOOR_SHIFT1: drift, l = 0
GKICKER1: drift, l = 0
HKICKER1: hkicker, l = 4.5, kick = 5E-3, tilt = 0.1
INSTRUMENT1: drift, l = 4.5
KMULTIPOLE_7: multipole, K0L = 3E-6, T0 = 0.1
KICKER1: kicker, l = 4.5, vkick = 3E-3, tilt = 0.1
MATCH1: matrix
MONITOR1: drift, l = 4.5
MULTIPOLE1: multipole, K1L = 1, T1 = 0.785398, K3L = 4.5, T3 = 0.973894
OCTUPOLE1: octupole, l = 4.5, k3 = 1000, tilt = 0.392699
DRIFT_PATCH1: drift, l = 4E-3
QMULTIPOLE_8: multipole, K0L = 3E-3, T0 = -0.785398, K1L = 0.03, &
     T1 = -3.06162E-17
Q_KICKER_9: kicker, l = 0, vkick = -5E-5
QUADRUPOLE1: matrix, rm(1,1) = 1, rm(2,2) = 1, rm(3,3) = 1, rm(4, &
    4) = 1, rm(5,5) = 1, kick(5) = 7.47961E-5, rm(6,6) = 1
QMULTIPOLE_10: multipole, K0L = -3E-3, T0 = -0.785398, K1L = -0.03
Q_KICKER_11: kicker, l = 0, vkick = -5E-5
QUADRUPOLE2: matrix, rm(1,1) = 1, rm(2,2) = 1, rm(3,3) = 1, rm(4, &
    4) = 1, rm(5,5) = 1, kick(5) = 8.70229E-5, rm(6,6) = 1
QMULTIPOLE_12: multipole, K0L = 3E-23, T0 = -0.785398, K1L = 3E-22, &
     T1 = -3.06162E-17
Q_KICKER_13: kicker, l = 0, vkick = -5E-5
QUADRUPOLE3: matrix, rm(1,1) = 1, rm(2,2) = 1, rm(3,3) = 1, rm(4, &
    4) = 1, rm(5,5) = 1, kick(5) = -9.57925E-6, rm(6,6) = 1
QMULTIPOLE_14: multipole, K0L = 3E-3, T0 = -0.785398, K1L = 0.03, &
     T1 = -3.06162E-17
Q_KICKER_15: kicker, l = 0, vkick = -5E-5
QUADRUPOLE4: matrix, rm(1,1) = 1, rm(2,2) = 1, rm(3,3) = 1, rm(4, &
    4) = 1, rm(5,5) = 1, kick(5) = 7.53958E-5, rm(6,6) = 1
QMULTIPOLE_16: multipole, K0L = -3E-3, T0 = -0.785398, K1L = -0.03
Q_KICKER_17: kicker, l = 0, vkick = -5E-5
QUADRUPOLE5: matrix, rm(1,1) = 1, rm(2,2) = 1, rm(3,3) = 1, rm(4, &
    4) = 1, rm(5,5) = 1, kick(5) = 8.76901E-5, rm(6,6) = 1
RCOLLIMATOR1: RCollimator, l = 4.5, xsize = 0.2, ysize = 0.1
RFCAVITY1: rfcavity, l = 4.5, volt = 0.1, lag = 0.6, harmon = 184
RFCAVITY2: rfcavity, l = 4.5, volt = 0.1, lag = 0.6, harmon = 184
RFCAVITY3: rfcavity, l = 0, volt = 0.1, lag = 0.6, harmon = 184
S_KICKER_18: kicker, l = 0, vkick = -5E-5
SBEND1: matrix, rm(1,1) = 1, rm(2,2) = 1, rm(3,3) = 1, rm(4,4) = 1, &
     rm(5,5) = 1, kick(5) = -1.50601E-5, rm(6,6) = 1
S_KICKER_19: kicker, l = 0, vkick = -5E-5
RBEND2: matrix, rm(1,1) = 1, rm(2,2) = 1, rm(3,3) = 1, rm(4,4) = 1, &
     rm(5,5) = 1, kick(5) = -1.94059E-5, rm(6,6) = 1
S_KICKER_20: kicker, l = 0, vkick = -5E-5
SBEND3: matrix, rm(1,1) = 1, rm(2,2) = 1, rm(3,3) = 1, rm(4,4) = 1, &
     rm(5,5) = 1, kick(5) = -1.79032E-5, rm(6,6) = 1
SMULTIPOLE_21: multipole, K0L = 3E-7, T0 = -1.4708, K1L = 1.5E-6, &
     T1 = -0.685398
S_KICKER_22: kicker, l = 0, hkick = 2.95517E-3, vkick = 2.46506E-4
RBEND4: matrix, rm(1,1) = 1, rm(2,2) = 1, rm(3,3) = 1, rm(4,4) = 1, &
     rm(5,5) = 1, kick(5) = -2.30659E-5, rm(6,6) = 1
SMULTIPOLE_23: multipole, K0L = 3E-5, T0 = -1.4708, K1L = 1.5E-4, &
     T1 = -0.685398
S_KICKER_24: kicker, l = 0, vkick = -5E-5
SBEND5: matrix, rm(1,1) = 1, rm(2,2) = 1, rm(3,3) = 1, rm(4,4) = 1, &
     rm(5,5) = 1, kick(5) = -2.15574E-5, rm(6,6) = 1
SMULTIPOLE_25: multipole, K0L = 3E-10, T0 = -1.4708, K1L = 1.5E-9, &
     T1 = -0.685398
S_KICKER_26: kicker, l = 0, hkick = 2.98499E-3, vkick = 2.49498E-4
RBEND6: matrix, rm(1,1) = 1, rm(2,2) = 1, rm(3,3) = 1, rm(4,4) = 1, &
     rm(5,5) = 1, kick(5) = -2.3072E-5, rm(6,6) = 1
SMULTIPOLE_27: multipole, K0L = 3E-5, T0 = -1.4708, K1L = 1.5E-4, &
     T1 = -0.685398
S_KICKER_28: kicker, l = 0, vkick = -5E-5
SBEND7: matrix, rm(1,1) = 1, rm(2,2) = 1, rm(3,3) = 1, rm(4,4) = 1, &
     rm(5,5) = 1, kick(5) = -2.15645E-5, rm(6,6) = 1
SEXTUPOLE1: sextupole, l = 0.6, k2 = 1, tilt = 0.523599
SOLENOID1: solenoid, l = 2.6, ks = 1
SOLENOID2: solenoid, l = 2.6, ks = 1E-12
DRIFT_Z29: drift, l = 1.3
SOL_QUAD1: matrix
DRIFT_Z30: drift, l = 1.3
SOL_QUAD2: matrix
TMULTIPOLE_31: multipole, K2L = 1, T2 = -0.423599, K3L = 60, T3 = 0.1
THICK_MULTIPOLE1: drift, l = 4.5
TAYLOR1: matrix, l = 0.5, rm(1,1) = 1.00445, kick(1) = -9.54885E-3, &
     rm(1,2) = 8.81211, rm(1,3) = 3.15887E-6, rm(1,4) = 6.24736E-7, &
     rm(1,5) = -7.9443E-4, rm(1,6) = -1.59897E-3, tm(1,1,1) = -0.186887, &
     tm(1,1,4) = -4.49986E-8, tm(1,2,4) = 2.26515E-6, tm(1,3, &
    4) = 0.0737887, tm(1,4,4) = 7.48496E-3, tm(1,5,5) = 8.26014E-4, &
     tm(1,1,6) = -2.8822E-3, tm(1,2,6) = -5.81233, tm(1,3,6) = -2.26589E-6, &
     tm(1,4,6) = -1.07353E-6, tm(1,5,6) = -2.59775E-5, tm(1,6, &
    6) = 1.59915E-3, rm(2,2) = 1.0001, kick(2) = 2.75022E-4, rm(2, &
    1) = 5.17076E-4, rm(2,3) = 3.66717E-7, rm(2,4) = 7.25623E-8, &
     tm(2,2,2) = -8.24667E-4, tm(2,3,3) = 0.0216962, tm(2,1,4) = -1.66887E-8, &
     tm(2,2,4) = -1.00551E-7, tm(2,3,4) = 8.56569E-3, tm(2,4, &
    4) = 8.76072E-4, tm(2,1,5) = 1.53868E-6, tm(2,2,5) = 2.97087E-3, &
     tm(2,4,6) = -7.74636E-8, tm(2,5,6) = -8.16983E-7, tm(2,6, &
    6) = 2.88699E-8, rm(3,3) = 1, kick(3) = 3.26106E-5, rm(3, &
    5) = -8.48787E-6, rm(3,6) = -1.62965E-5, tm(3,1,2) = 5.23063E-8, &
     tm(3,2,2) = 9.9263E-7, tm(3,1,3) = 0.373775, tm(3,2,3) = 0.0737792, &
     tm(3,1,4) = 0.0737176, tm(3,2,4) = 0.0145516, tm(3,3,5) = -1.40995E-3, &
     tm(3,4,5) = -3.0176, tm(3,5,5) = 8.41554E-6, tm(3,1,6) = -2.26546E-6, &
     tm(3,2,6) = -1.07041E-6, tm(3,3,6) = 2.88268E-3, tm(3,4, &
    6) = -5.80943, tm(3,5,6) = 1.19481E-7, rm(4,4) = 0.999897, &
     rm(4,3) = -5.17211E-4, rm(4,5) = 8.33163E-9, tm(4,2,2) = -7.37549E-8, &
     tm(4,3,4) = -1.64887E-8, tm(4,4,4) = -1.74264E-7, tm(4,3, &
    5) = -1.53357E-6, tm(4,4,5) = 2.97026E-3, tm(4,1,6) = -2.40618E-8, &
     tm(4,2,6) = -7.70389E-8, tm(4,3,6) = -2.31499E-6, tm(4,4, &
    6) = 1.02381E-4, rm(5,5) = 1, kick(5) = -8.6214E-5, rm(5, &
    1) = -7.97679E-7, rm(5,2) = -1.59888E-3, rm(5,3) = 7.57432E-9, &
     tm(5,3,3) = -3.42794E-5, tm(5,1,4) = -2.19303E-6, tm(5,2, &
    4) = -8.12886E-7, tm(5,3,4) = 2.88908E-3, tm(5,4,4) = -2.90487, &
     tm(5,1,5) = 8.04598E-7, tm(5,2,5) = -2.36194E-5, tm(5,4, &
    5) = 1.45261E-7, tm(5,5,6) = 1.45043E-8, tm(5,6,6) = -7.41367E-7, &
     rm(6,6) = 1, kick(6) = -7.57023E-6, rm(6,1) = 1.22662E-6, &
     rm(6,2) = 7.92211E-4, rm(6,3) = 4.24341E-9, rm(6,4) = 8.46364E-6, &
     rm(6,5) = 5.94094E-3, tm(6,1,3) = 3.69542E-7, tm(6,2,3) = 1.17658E-6, &
     tm(6,3,3) = 1.60572E-5, tm(6,1,4) = 1.1766E-6, tm(6,2,4) = 4.78291E-7, &
     tm(6,3,4) = 1.42032E-3, tm(6,4,4) = 1.50447, tm(6,1,5) = -5.30024E-7, &
     tm(6,2,6) = 3.29521E-5, tm(6,4,6) = -4.68311E-8
VKICKER1: vkicker, l = 4.5, kick = 5E-3, tilt = 0.1
LCAVITY1: lcavity, l = 4.5, deltae = 5E-3, freq = 500, phi0 = 0.15, swave
LCAVITY2: lcavity, l = 4.5, deltae = 5E-6, freq = 500, phi0 = 0.15, swave
LCAVITY3: lcavity, l = 4.5, deltae = 5E-3, freq = 500, phi0 = 0.15
END: marker

! ---------------------------------

line_1: line = (AB_MULTIPOLE1, A_KICKER_1, AC_KICKER1, A_KICKER_1, A_KICKER_2, &
   AC_KICKER2, A_KICKER_2, A_KICKER_3, AC_KICKER3, A_KICKER_3, BEAMBEAM1, &
   CRAB_CAVITY1, E_KICKER_4, ECOLLIMATOR1, E_KICKER_4, E_KICKER_5, &
   ELSEPARATOR1, E_KICKER_5, E_KICKER_6, ELSEPARATOR2, E_KICKER_6, EM_FIELD1, &
   EM_FIELD2, FIDUCIAL1, FLOOR_SHIFT1, GKICKER1, HKICKER1, INSTRUMENT1, &
   KMULTIPOLE_7, KICKER1, KMULTIPOLE_7, MATCH1, MONITOR1, MULTIPOLE1, &
   OCTUPOLE1, DRIFT_PATCH1, PATCH1, QMULTIPOLE_8, Q_KICKER_9, QUADRUPOLE1, &
   Q_KICKER_9, QMULTIPOLE_8, QMULTIPOLE_10, Q_KICKER_11, QUADRUPOLE2, &
   Q_KICKER_11, QMULTIPOLE_10, QMULTIPOLE_12, Q_KICKER_13, QUADRUPOLE3, &
   Q_KICKER_13, QMULTIPOLE_12, QMULTIPOLE_14, Q_KICKER_15, QUADRUPOLE4, &
   Q_KICKER_15, QMULTIPOLE_14, QMULTIPOLE_16, Q_KICKER_17, QUADRUPOLE5, &
   Q_KICKER_17, QMULTIPOLE_16, RCOLLIMATOR1, RFCAVITY1, RFCAVITY2, RFCAVITY3, &
   SAD_MULT1, SAD_MULT2, S_KICKER_18, SBEND1, S_KICKER_18, S_KICKER_19, &
   RBEND2, S_KICKER_19, S_KICKER_20, SBEND3, S_KICKER_20, SMULTIPOLE_21, &
   S_KICKER_22, RBEND4, S_KICKER_22, SMULTIPOLE_21, SMULTIPOLE_23, &
   S_KICKER_24, SBEND5, S_KICKER_24, SMULTIPOLE_23, SMULTIPOLE_25, &
   S_KICKER_26, RBEND6, S_KICKER_26, SMULTIPOLE_25, SMULTIPOLE_27, &
   S_KICKER_28, SBEND7, S_KICKER_28, SMULTIPOLE_27, SEXTUPOLE1, SOLENOID1, &
   SOLENOID2, DRIFT_Z29, SOL_QUAD1, DRIFT_Z29, DRIFT_Z30, SOL_QUAD2, &
   DRIFT_Z30, TMULTIPOLE_31, THICK_MULTIPOLE1, TMULTIPOLE_31, TAYLOR1, &
   VKICKER1, LCAVITY1, LCAVITY2, LCAVITY3, END)

! ---------------------------------

lat: line = (line_1)

! ---------------------------------

select, flag = error, clear
select, flag = error, range = AB_MULTIPOLE1[1]
ealign, dx = 0.02
select, flag = error, clear
select, flag = error, range = BEAMBEAM1[1]
ealign, dphi = -0.05, dx = 3E-3, dy = 3E-3
select, flag = error, clear
select, flag = error, range = ECOLLIMATOR1[1]
ealign, dphi = -1E-3, dx = 0.02, dy = -2.25E-3
select, flag = error, clear
select, flag = error, range = ELSEPARATOR1[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -2.25E-3
select, flag = error, clear
select, flag = error, range = ELSEPARATOR2[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -2.25E-3
select, flag = error, clear
select, flag = error, range = FLOOR_SHIFT1[1]
ealign, dtheta = 0.01, dphi = -0.02, dx = 0.1, dy = 0.2, ds = 0.3
select, flag = error, clear
select, flag = error, range = GKICKER1[1]
ealign, dtheta = 0.02, dphi = -0.03, dx = 0.04, dy = 0.05, ds = 0.06
select, flag = error, clear
select, flag = error, range = HKICKER1[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -2.25E-3
select, flag = error, clear
select, flag = error, range = KICKER1[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -2.25E-3
select, flag = error, clear
select, flag = error, range = MULTIPOLE1[1]
ealign, dx = 0.05
select, flag = error, clear
select, flag = error, range = OCTUPOLE1[1]
ealign, dphi = -1E-3, dx = 0.01, dy = -2.25E-3
select, flag = error, clear
select, flag = error, range = DRIFT_PATCH1[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -2E-6
select, flag = error, clear
select, flag = error, range = QUADRUPOLE1[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -3E-4
select, flag = error, clear
select, flag = error, range = QUADRUPOLE2[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -3E-4
select, flag = error, clear
select, flag = error, range = QUADRUPOLE3[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -3E-4
select, flag = error, clear
select, flag = error, range = QUADRUPOLE4[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -3E-4
select, flag = error, clear
select, flag = error, range = QUADRUPOLE5[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -3E-4
select, flag = error, clear
select, flag = error, range = RCOLLIMATOR1[1]
ealign, dphi = -1E-3, dx = 0.02, dy = -2.25E-3
select, flag = error, clear
select, flag = error, range = RFCAVITY1[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -2.25E-3
select, flag = error, clear
select, flag = error, range = RFCAVITY2[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -2.25E-3
select, flag = error, clear
select, flag = error, range = RFCAVITY3[1]
ealign, dphi = -1E-3, dx = 0.05
select, flag = error, clear
select, flag = error, range = SBEND1[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -3E-4
select, flag = error, clear
select, flag = error, range = RBEND2[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -3E-4
select, flag = error, clear
select, flag = error, range = SBEND3[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -3E-4
select, flag = error, clear
select, flag = error, range = RBEND4[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -3E-4
select, flag = error, clear
select, flag = error, range = SBEND5[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -3E-4
select, flag = error, clear
select, flag = error, range = RBEND6[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -3E-4
select, flag = error, clear
select, flag = error, range = SBEND7[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -3E-4
select, flag = error, clear
select, flag = error, range = SEXTUPOLE1[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -3E-4
select, flag = error, clear
select, flag = error, range = SOLENOID1[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -1.3E-3
select, flag = error, clear
select, flag = error, range = SOLENOID2[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -1.3E-3
select, flag = error, clear
select, flag = error, range = SOL_QUAD1[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -1.3E-3
select, flag = error, clear
select, flag = error, range = DRIFT_Z29[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -6.5E-4
select, flag = error, clear
select, flag = error, range = DRIFT_Z29[2]
ealign, dphi = -1E-3, dx = 0.05, dy = -6.5E-4
select, flag = error, clear
select, flag = error, range = SOL_QUAD2[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -1.3E-3
select, flag = error, clear
select, flag = error, range = DRIFT_Z30[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -6.5E-4
select, flag = error, clear
select, flag = error, range = DRIFT_Z30[2]
ealign, dphi = -1E-3, dx = 0.05, dy = -6.5E-4
select, flag = error, clear
select, flag = error, range = THICK_MULTIPOLE1[1]
ealign, dx = 0.02
select, flag = error, clear
select, flag = error, range = VKICKER1[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -2.25E-3
select, flag = error, clear
select, flag = error, range = LCAVITY1[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -2.25E-3
select, flag = error, clear
select, flag = error, range = LCAVITY2[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -2.25E-3
select, flag = error, clear
select, flag = error, range = LCAVITY3[1]
ealign, dphi = -1E-3, dx = 0.05, dy = -2.25E-3

! ---------------------------------

initial: beta0, betx = 10, bety = 10, alfx = 0, alfy = 0,  &
     dx = 0, dpx = 0, dy = 0, dpy = 0,  &
     x = 1E-3, px = 2E-3, y = 3E-3, py = 4E-3, t = 4.29791E-3, pt = 6.98014E-3
     
twiss, beta0 = initial;
