% Etienne stuff

\newcommand{\RR}{\textrm{I\kern-0.19emR}}
\newcommand{\CC}{\textrm{I\kern-0.5emC}}
\newcommand{\dragt}{\mbox{\scriptsize $\begin{matrix}\# \\
\# \end{matrix}$}}
\newcommand{\cook}{cookbook}  %future location
\newcommand{\forestj}{Forest}
\definecolor{mucol}{rgb}{0.7,0.1,0.1}
\newcommand{\etex}{{\color{mucol} \Huge $\bullet $} }

% End Etienne stuff

\newcommand{\cosc}{\text{cosc}}
\newcommand{\atantwo}{\text{atan2}}
\newcommand{\sinc}{\text{sinc}}
\newcommand{\sincc}{\text{sincc}}
\newcommand{\Deg}{$^\circ$}
\newcommand{\rc}{r_{\!c}}

\newcommand{\backtick}{\symbol{0}}

\newcommand{\Bf}[1]{{\bf #1}}
\newcommand{\dsfrac}[2]{\frac{\displaystyle #1}{\displaystyle #2}}
\newcommand{\calO}{{\cal O}}
\newcommand{\calH}{{\cal H}}
\newcommand{\calM}{{\cal M}}
\newcommand{\Cal}[1]{{\cal #1}}
\newcommand{\two}{}
\newcommand{\bfsig}{{\boldsymbol{\sigma}}}
\newcommand{\sigb}{\sigma_\beta}
\newcommand{\bfrbar}{\overline{\Bf r}}
\newcommand{\arrowbfq}{\overrightarrow{\Bf q}}
\DeclareMathAlphabet\calbf{OMS}{cmsy}{b}{n}

\newcommand{\mk}[1]{{\mkern-3 mu{#1}}}

\newcommand{\mis}{{\text{mis}}}
\newcommand{\lab}{{\text{lab}}}
\newcommand{\ele}{{\text{ele}}}
\newcommand{\sign}{{\text{sgn}}}
\newcommand{\Out}{{\text{out}}}
\newcommand{\In}{{\text{in}}}
\newcommand{\REF}{{\text{ref}}}   % Some package defines "\Ref" so cannot use

\newcommand{\re}{\operatorname{Re}}
\newcommand{\im}{\operatorname{Im}}

\newcommand{\cali}{\Bf{i}}
\newcommand{\calj}{\Bf{j}}
\newcommand{\calk}{\Bf{k}}

\newcommand{\bfa}{\Bf a}
\newcommand{\bfb}{\Bf b}
\newcommand{\bfc}{\Bf c}
\newcommand{\bfd}{\Bf d}
\newcommand{\bfe}{\Bf e}
\newcommand{\bfg}{\Bf g}
\newcommand{\bfj}{\Bf j}
\newcommand{\bfk}{\Bf k}
\newcommand{\bfl}{\Bf l}
\newcommand{\bfm}{\Bf m}
\newcommand{\bfn}{\Bf n}
\newcommand{\bfp}{\Bf p}
\newcommand{\bfq}{\Bf q}
\newcommand{\bfr}{\Bf r}
\newcommand{\bfs}{\Bf s}
\newcommand{\bft}{\Bf t}
\newcommand{\bfu}{\Bf u}
\newcommand{\bfv}{\Bf v}
\newcommand{\bfw}{\Bf w}
\newcommand{\bfx}{\Bf x}
\newcommand{\bfy}{\Bf y}
\newcommand{\bfz}{\Bf z}
\newcommand{\bfA}{\Bf A}
\newcommand{\bfB}{\Bf B}
\newcommand{\bfC}{\Bf C}
\newcommand{\bfD}{\Bf D}
\newcommand{\bfE}{\Bf E}
\newcommand{\bfF}{\Bf F}
\newcommand{\bfG}{\Bf G}
\newcommand{\bfH}{\Bf H}
\newcommand{\bfI}{\Bf I}
\newcommand{\bfJ}{\Bf J}
\newcommand{\bfK}{\Bf K}
\newcommand{\bfL}{\Bf L}
\newcommand{\bfM}{\Bf M}
\newcommand{\bfN}{\Bf N}
\newcommand{\bfO}{\Bf O}
\newcommand{\bfP}{\Bf P}
\newcommand{\bfQ}{\Bf Q}
\newcommand{\bfR}{\Bf R}
\newcommand{\bfS}{\Bf S}
\newcommand{\bfT}{\Bf T}
\newcommand{\bfU}{\Bf U}
\newcommand{\bfV}{\Bf V}
\newcommand{\bfW}{\Bf W}
\newcommand{\bfZ}{\Bf Z}

\newcommand{\bfeta}{\boldsymbol{\eta}}
\newcommand{\bfbeta}{\boldsymbol{\beta}}

\newcommand{\vdot}[2]{\Bigl[ #1, \, #2 \Bigr]}
\newcommand{\comma}{\> ,}
\newcommand{\period}{\> .}
\newcommand{\bfAbar}{\overline{\bfA}}
\newcommand{\bfCbar}{\overline{\bfC}}
\newcommand{\bfKbar}{\overline{\bfK}}
\newcommand{\bfkbar}{\overline{\bfk}}
\newcommand{\bfSbar}{\overline{\bfS}}
\newcommand{\bfTbar}{\overline{\bfT}}
\newcommand{\Hbar}{{\overline{H}}}
\newcommand{\Kbar}{\overline{K}}
\newcommand{\kbar}{\overline{k}}
\newcommand{\Ebar}{\overline{E}}
\newcommand{\Pbar}{\overline{P}}
\newcommand{\gam}{\gamma}                                     
\newcommand{\inv}{^{-1}}

\newcommand{\tot}{{\text{tot}}}

%%\newcommand{\dotproduct}{\mathbin{\scriptscriptstyle\stackrel{\bullet}{{}}}}
\newcommand{\dotproduct}{\mathbin{\boldsymbol{\cdot}}}
\newcommand{\cross}{\mathbin{\boldsymbol{\times}}}

\newcommand{\what}{\widehat}
\newcommand{\wt}{\widetilde}
\newcommand{\bfhat}[1]{{\widehat{\bf  #1}}}
\newcommand{\bftilde}[1]{{\widetilde{\bf #1}}}
\newcommand{\xw}{{\widetilde x}}
\newcommand{\yw}{{\widetilde y}}
\newcommand{\rw}{{\widetilde r}}
\newcommand{\pw}{{\widetilde p}}

\newcommand{\tstyle}{\textstyle}
\newcommand{\dstyle}{\displaystyle}
\newcommand{\stilde}{{\widetilde s}}
\newcommand{\tWl}{\widetilde{W}^{SR}_\parallel}
\newcommand{\WlS}{W^{SR}_\parallel}
\newcommand{\WtS}{W^{SR}_\perp}
\newcommand{\WtL}{W^{LR}_\perp}

\newcommand{\hyperbf}[1]{\textbf{\hyperpage{#1}}}
\newcommand{\Hyperref}[2]{\index[routine]{#2}\hyperref[#1]{#2}}

\newcommand{\om}{\omega}
\newcommand{\qqquad}{\qquad \qquad}
\newcommand{\ks}{\widetilde k_s}
\newcommand{\kone}{\widetilde k_1}

\newcommand{\hphphp}{\hphantom{\dfrac{k_x}{k_y}}}
\newcommand{\Ce}{\text{C}}
\newcommand{\Se}{\text{S}}
\newcommand{\Ch}{\text{Ch}}
\newcommand{\Sh}{\text{Sh}}

\newcommand{\CR}{\\}
\newcommand{\CRNO}{\nonumber \\}

\newcommand{\fig}[1]{Fig.~\ref{#1}}
\newcommand{\figs}[1]{Figs.~\ref{#1}}

\newcommand{\pow}[1]{\cdot 10^{#1}}
\newcommand{\tao}{{\sl Tao}\xspace}
\newcommand{\bmad}{{\sl Bmad}\xspace}
\newcommand{\mad}{{\sl MAD}\xspace}
\newcommand{\quickplot}{{\sl Quick Plot}\xspace}
\newcommand{\cpp}{$C$\hskip-0.3ex\protect\raisebox{0.2ex}{\scriptsize ++}\xspace}
\newcommand{\CPP}{$C$\hskip-0.3ex{\protect\raisebox{.3ex}{\large {+}+}}\xspace}
%%\newcommand{\CPP}{$C${\small ++}\xspace}

\newcommand{\eq}[1]{{(\protect\ref{#1})}}
\newcommand{\Eq}[1]{{Eq.~(\protect\ref{#1})}}
\newcommand{\Eqs}[1]{{Eqs.~(\protect\ref{#1})}}

\newcommand{\sref}[1]{$\S$\ref{#1}}
\newcommand{\Sref}[1]{Sec.~\sref{#1}}
\newcommand{\cref}[1]{Chapter~\ref{#1}}
\newcommand{\s}{$\S$}

\newcommand{\toffset}{\vskip 0.01in}
\newcommand{\rot}[1]{\begin{rotate}{-45}#1\end{rotate}}

\newcommand{\ave}[1]{\left\langle #1 \right\rangle}

\newcommand\txt[1]{{\text{#1}}}
\newcommand{\vn}{\begingroup\catcode`\_=11 \catcode`\%=11 \dottcmd}
\newcommand\dottcmd[1]{\texttt{#1}\endgroup}


%\newcommand\ttverb{
%  \bgroup\let\do\@makeother\dospecials\catcode`{=1 \catcode`}=2 \DSAcode}
%\newcommand*\DSAcode[1]{\texttt{#1}\egroup}

\newcommand{\kxx}{k_x (x + x_0)}
\newcommand{\kyy}{k_y (y + y_0)}
\newcommand{\kzz}{k_z z + \phi_z}
\newcommand{\CRNEG}{\nonumber \\*[-1.5\jot]}
\newcommand{\CRneg}{\nonumber \\*[-1\jot]}
\newcommand{\Newline}{\hfil \\}

\newcommand{\plus}{\; + \;}

\newcommand{\Th}{$^{th}$\xspace}
\newcommand{\Nd}{$^{nd}$\xspace}
\newcommand{\Rd}{$^{rd}$\xspace}
\newcommand{\St}{$^{st}$\xspace}
\newcommand{\B}{$\backslash$}

\newlength{\dPar}
\setlength{\dPar}{1.5ex}

% Since a non-zero parskip is used, the alltt environment needs to be modified to keep
% the white space before and after from being too large.

% Note: Use \( ... \) for inline equations in example mode. 
% Use \[ ... \] for display equations.
%\sb{} and \sp{} need to be used for subscripts and superscripts instead of "_" and "^".

\newenvironment{example}
  {\vspace{-3.0ex} \begin{alltt}}
  {\end{alltt} \vspace{-2.5ex}}

\newenvironment{example2}
  {\vspace{-2.5ex} \begin{alltt}}
  {\end{alltt} \vspace{-2.0ex}}

\newenvironment{Itemize}
  {\begin{list}{$\bullet$}
    {\addtolength{\topsep}{-1.5ex} 
     \addtolength{\itemsep}{-1ex}
    }
  }
  {\end{list} \vspace*{1ex}}

% \ExampleNum is for numbering "example" blocks using the same numbering counter
% as the "equation" counter

\newcommand{\ExampleNum}[1]{\hfill \refstepcounter{equation} \((\arabic{equation})\protect\label{#1}\)}

% From pg 64 of The LaTex Companion.

\newenvironment{ventry}[1]
  {\begin{list}{}
    {\renewcommand{\makelabel}[1]{\textsf{##1}\hfil}
     \settowidth{\labelwidth}{\textsf{#1}}
     \addtolength{\itemsep}{-1.5ex}
     \addtolength{\topsep}{-1.0ex} 
     \setlength{\leftmargin}{5em}
    }
  }
  {\end{list}}

%\BAR gives an overline raised up a little bit (otherwise it is too close to what is below).
\newcommand{\BAR}[1]{\overline{\raisebox{0pt}[\dimexpr\height+0.15ex\relax]{$#1$}}}

% Superscript or subscript minus and plus looks better if smaller and bolder than normal.
%\newcommand\bpkplus{{\mbox{\fontfamily{pbk}\fontseries{db}\selectfont+}}}  % This is too bold

\newcommand\pbkminus{{\mbox{\fontfamily{pbk}\selectfont-}}}
\newcommand{\mmin}{{\hspace{-0.1em} \raisebox{-0.5ex}{\scalebox{1.4}[1.4]{\pbkminus}}}}

\newcommand\pbkplus{{\mbox{\fontfamily{pbk}\selectfont+}}}
\newcommand{\ppls}{{\hspace{-0.1em} \raisebox{-0.4ex}{\scalebox{1.0}[1.0]{\pbkplus}}}}

\newcommand{\DAG}{$^\dagger$}
\newcommand{\DDAG}{$^\ddagger$}

%%% Table of Contents spacing.
\makeatletter   % So can use @ sign in \renewcommand
\renewcommand{\l@section}{\@dottedtocline{1}{1.5em}{3.3em}}
\renewcommand{\l@subsection}{\@dottedtocline{2}{3.8em}{4.2em}}
\renewcommand{\l@figure}{\@dottedtocline{1}{1.5em}{3.3em}}
\renewcommand{\l@table}{\@dottedtocline{1}{1.5em}{3.3em}}
\renewcommand{\l@subsection}{\@dottedtocline{2}{1.5em}{3.5em}}
\makeatother    % Reset 
